webpackJsonp([1],{32:function(e,t,s){"use strict";s.d(t,"a",function(){return i});var n=s(18),r=s(87),o=s(76),a=s.n(o);n.a.use(r.a);var i=new r.a.Store({state:{username:"",users:{},messages:[]},mutations:{changeUsername:function(e,t){e.username=t},changeUsers:function(e,t){e.users=t},addMessage:function(e,t){e.messages.push(t)},fetchMessages:function(e,t){e.messages=t}},actions:{registerUsername:function(e,t){var s=e.commit;u.emit("registerUsername",t,function(e){e?s("changeUsername",t.username):console.log("Username taken")})},sendMessage:function(e,t){var s=e.commit,n=e.state,r={msg:t,username:n.username};u.emit("chat message",t),s("addMessage",r)},changeColor:function(e,t){var s=(e.commit,e.state);u.emit("changeColor",{username:s.username,color:t})},fetchMessages:function(e){e.commit,e.state;console.log("action called"),u.emit("fetchMessages")}}}),c=location.origin.replace("8006","8080"),u=a()(c);u.on("usersChanged",function(e){i.commit("changeUsers",e)}),u.on("chat message",function(e){i.commit("addMessage",e)}),u.on("fetchMessages",function(e){i.commit("fetchMessages",e)})},33:function(e,t,s){function n(e){s(53)}var r=s(17)(s(36),s(84),n,null,null);e.exports=r.exports},36:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(81),r=s.n(n),o=s(82),a=s.n(o);t.default={name:"app",components:{"app-login":r.a,"app-messaging":a.a},computed:{username:function(){return this.$store.state.username}}}},37:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{username:"",color:"000000"}},computed:{},methods:{registerUsername:function(){if(""===this.username)return!1;this.$store.dispatch("registerUsername",{username:this.username,color:this.color})},colorChange:function(e){this.color=e}}}},38:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(57),r=s.n(n),o=s(75),a=new o.Converter;t.default={data:function(){return{mode:"type",newMsg:"",showUsers:!1}},mounted:function(){jscolor.installByClassName("jscolor")},computed:{color:function(){return this.$store.state.color},users:function(){return this.$store.state.users},messages:function(){return this.$store.state.messages},scrollTop:function(){return 300},username:function(){return this.$store.state.username}},watch:{messages:function(){var e=this;setTimeout(function(){var t=e.$el.querySelector("#messagesContainer");t.scrollTop=t.scrollHeight},1)}},created:function(){this.$store.dispatch("fetchMessages")},methods:{logUsers:function(){console.log(this.users)},sendMessage:function(){if(""===this.newMsg)return!1;this.$store.dispatch("sendMessage",this.newMsg),this.newMsg=""},getColor:function(e){try{return"#"+this.users[e].color}catch(e){return"#000000"}},scrollToEnd:function(){var e=this.$el.querySelector("#messagesContainer");e.scrollTop=e.scrollHeight},fetchMessages:function(){console.log("component method called"),this.$store.dispatch("fetchMessages")},MDtoHTML:function(e){try{var t=a.makeHtml(e);return t=t.replace(/\$\$(.+?)\$\$/g,function(e){try{return r.a.renderToString(e.substring(2,e.length-2),{displayMode:!0})}catch(t){return e}}),t=t.replace(/\$(.+?)\$/g,function(e){try{return r.a.renderToString(e.substring(1,e.length-1),{displayMode:!1})}catch(t){return e}}),t=t.replace(/\\\$/g,"$")}catch(t){return e}},changeColor:function(e){this.$store.dispatch("changeColor",e)}}}},39:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(18),r=s(33),o=s.n(r),a=s(32);n.a.config.productionTip=!1,new n.a({el:"#app",template:"<App/>",store:a.a,components:{App:o.a}})},52:function(e,t){},53:function(e,t){},54:function(e,t){},81:function(e,t,s){function n(e){s(54)}var r=s(17)(s(37),s(85),n,"data-v-631947da",null);e.exports=r.exports},82:function(e,t,s){function n(e){s(52)}var r=s(17)(s(38),s(83),n,"data-v-28807575",null);e.exports=r.exports},83:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"row center-xs top-xs",attrs:{id:"chat"}},[s("div",{ref:"messagesContainer",attrs:{id:"messagesContainer"}},e._l(e.messages,function(t){return s("div",{staticClass:"messageContainer"},[s("div",{staticClass:"messageHeader"},[s("span",{style:{color:e.getColor(t.username),"font-weight":"bold"}},[e._v(e._s(t.username==e.username?"Me":t.username))])]),e._v(" "),s("div",{staticClass:"messageBody",domProps:{innerHTML:e._s(e.MDtoHTML(t.msg))}})])})),e._v(" "),s("div",{attrs:{id:"editorContainer"}},[s("div",{attrs:{id:"optionsContainer"}},[s("div",{attrs:{id:"leftOptions"}},[s("i",{staticClass:"fa fa-pencil-square-o",class:{active:"type"==e.mode},attrs:{"aria-hidden":"true"},on:{click:function(t){e.mode="type"}}}),e._v(" "),s("i",{staticClass:"fa fa-eye",class:{active:"preview"==e.mode},attrs:{"aria-hidden":"true"},on:{click:function(t){e.mode="preview"}}}),e._v(" "),s("input",{attrs:{type:"hidden",id:"color_value"},domProps:{value:e.color},on:{change:function(t){e.changeColor(t.target.value)}}}),e._v(" "),s("button",{staticClass:"jscolor {valueElement: 'color_value'}",attrs:{id:"colorButton"}},[e._v("\n\t\t\t\t\tColor\n\t\t\t\t")]),e._v(" "),s("i",{staticClass:"fa fa-users",class:{active:e.showUsers},attrs:{"aria-hidden":"true",id:"toggleUsers"},on:{click:function(t){e.showUsers=!e.showUsers}}})]),e._v(" "),s("i",{staticClass:"fa fa-paper-plane",staticStyle:{float:"right"},attrs:{"aria-hidden":"true"},on:{click:function(t){e.sendMessage()}}})]),e._v(" "),s("div",{attrs:{id:"inputContainer"}},["type"==e.mode?s("div",[s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.newMsg,expression:"newMsg"}],attrs:{name:"newMsg",id:"newMsg"},domProps:{value:e.newMsg},on:{keyup:function(t){return("button"in t||!e._k(t.keyCode,"enter",13))&&t.ctrlKey?void e.sendMessage():null},input:function(t){t.target.composing||(e.newMsg=t.target.value)}}})]):e._e(),e._v(" "),"preview"==e.mode?s("div",{attrs:{id:"preview"},domProps:{innerHTML:e._s(e.MDtoHTML(e.newMsg))}}):e._e()])]),e._v(" "),s("div",{class:{shown:e.showUsers},attrs:{id:"usersContainer"}},[s("h1",[e._v("Online")]),e._v(" "),s("ul",{attrs:{id:"usersList"}},e._l(e.users,function(t,n){return s("li",{style:{color:"#"+t.color}},[e._v("\n\t\t\t\t"+e._s(n)+"\n\t\t\t")])}))])])},staticRenderFns:[]}},84:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s(""===e.username?"app-login":"app-messaging")],1)},staticRenderFns:[]}},85:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"login"}},[s("div",[s("h1",[e._v("Choose a Nickname")]),e._v(" "),s("p",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],class:{blink:""===e.username},attrs:{type:"text",id:"username"},domProps:{value:e.username},on:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13))return null;e.registerUsername()},input:function(t){t.target.composing||(e.username=t.target.value)}}})])]),e._v(" "),s("div",[s("h1",[e._v("Choose Your Color:")]),e._v(" "),s("p",[s("input",{staticClass:"jscolor {position:'top'}",attrs:{id:"colorPicker"},domProps:{value:e.color},on:{change:function(t){e.colorChange(t.target.value)}}})])]),e._v(" "),s("div",[""!==e.username?s("i",{staticClass:"fa fa-arrow-circle-o-right",attrs:{id:"goButton","aria-hidden":"true"},on:{click:function(t){e.registerUsername()}}}):e._e()])])},staticRenderFns:[]}},89:function(e,t){}},[39]);
//# sourceMappingURL=app.ed1338120aaad5dd3de4.js.map